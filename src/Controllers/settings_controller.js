"use strict";const e=require("../Models/History"),s=require("../Models/User"),i=require("../API/getAdminid"),t=require("../API/op_categories"),r=require("../API/Converter"),{ValidSession:n}=require("../API/Session/session");module.exports.getSettingsPage=async(e,t)=>{const r=await s.findById(i.getId(e));return!0===await n(e.session,r.id,t)?t.render("main_menu_settings",{...r.settings.recordsPerPage,user:r.id}):null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPContacts=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_contacts:i}=e.body,{recordsPerPage:n}=r.settings;return n.contacts=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPCorps=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_corps:i}=e.body,{recordsPerPage:n}=r.settings;return n.corps=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPLinks=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_links:i}=e.body,{recordsPerPage:n}=r.settings;return n.links=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPNews=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_news:i}=e.body,{recordsPerPage:n}=r.settings;return n.news=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPPages=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_pages:i}=e.body,{recordsPerPage:n}=r.settings;return n.pages=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPSidemenu=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_sidemenu:i}=e.body,{recordsPerPage:n}=r.settings;return n.sidemenu=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPHistory=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_history:i}=e.body,{recordsPerPage:n}=r.settings;return n.history=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPUsers=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_users:i}=e.body,{recordsPerPage:n}=r.settings;return n.users=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPCommand=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_command:i}=e.body,{recordsPerPage:n}=r.settings;return n.command=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})},module.exports.postRPPMessage=async(e,t)=>{const r=await s.findById(i.getId(e));if(!0===await n(e.session,r.id,t)){const{set_rpp_message:i}=e.body,{recordsPerPage:n}=r.settings;return n.message=i,await s.findByIdAndUpdate(r.id,{settings:{recordsPerPage:n}}),t.redirect("..")}return null===await n(e.session,r.id,t)?t.redirect("/admin/login"):t.status(400).render("infopage",{info:"Даний користувач авторизований в системі, використайте інший обліковий запис!",url:"/admin/login",url_text:"Повернутися до форми авторизації",user:r.id})};