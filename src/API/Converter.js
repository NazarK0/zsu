"use strict";const e=require("path"),t=require("fs"),n=require("../Models/CategoryPhoto"),s=require("../Models/Content"),i=require("../Models/CorpsSign"),o=require("../Models/CommandSign"),r=require("../Models/CorpsBackground");module.exports.getConvert=e=>JSON.parse(JSON.stringify(e)),module.exports.getSidemenuConverted=async e=>{let t=JSON.parse(JSON.stringify(e));for(let i=0;i<t.length;i++)if(t[i].content_id)try{const{page_title:e}=await s.findById(t[i].content_id).select({page_title:1,lang:2});t[i].content_title=e}catch(n){t[i].content_title="Не встановлено"}else t[i].content_title="Не встановлено";return t},module.exports.getCorpsConverted=async n=>{const s=JSON.parse(JSON.stringify(n)),o=t.readFileSync(e.join(__dirname,"../..","uploads/images/corps/sign","default.jpg"),"base64");for(let e=0;e<s.length;e++)if(s[e].sign_id)try{const t=await i.findById(s[e].sign_id);s[e].sign_base64=t.base64}catch(r){s[e].sign_base64=o}else s[e].sign_base64=o;return s},module.exports.getCommandConverted=async n=>{const s=JSON.parse(JSON.stringify(n)),i=t.readFileSync(e.join(__dirname,"../..","uploads/images/command/sign","default.jpg"),"base64");for(let e=0;e<s.length;e++)if(s[e].sign_id)try{const t=await o.findById(s[e].sign_id);s[e].sign_base64=t.base64}catch(r){s[e].sign_base64=i}else s[e].sign_base64=i;return s},module.exports.getCategoryPhotoBodyConverted=async e=>{let t=await n.findById(e.photo);return e.photo=t.base64,e};