"use strict";const e=require("path"),t=require("fs"),n=require("../Models/Content"),s=require("../Models/CorpsSign"),i=require("../Models/CommandSign"),r=require("../Models/CorpsBackground");module.exports.getConvert=e=>JSON.parse(JSON.stringify(e)),module.exports.getSidemenuConverted=async e=>{let t=JSON.parse(JSON.stringify(e));for(let i=0;i<t.length;i++)if(t[i].content_id)try{const{page_title:e}=await n.findById(t[i].content_id).select({page_title:1,lang:2});t[i].content_title=e}catch(s){t[i].content_title="Не встановлено"}else t[i].content_title="Не встановлено";return t},module.exports.getCorpsConverted=async n=>{const i=JSON.parse(JSON.stringify(n)),r=t.readFileSync(e.join(__dirname,"../..","uploads/images/corps/sign","default.jpg"),"base64");for(let e=0;e<i.length;e++)if(i[e].sign_id)try{const t=await s.findById(i[e].sign_id);i[e].sign_base64=t.base64}catch(a){i[e].sign_base64=r}else i[e].sign_base64=r;return i},module.exports.getCommandConverted=async n=>{const s=JSON.parse(JSON.stringify(n)),r=t.readFileSync(e.join(__dirname,"../..","uploads/images/command/sign","default.jpg"),"base64");for(let e=0;e<s.length;e++)if(s[e].sign_id)try{const t=await i.findById(s[e].sign_id);s[e].sign_base64=t.base64}catch(a){s[e].sign_base64=r}else s[e].sign_base64=r;return s};