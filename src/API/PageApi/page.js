"use strict";const e=require("../../Models/Content"),t=require("../../Models/Submenu"),n=require("../../Models/ChildSub"),i=require("../../Models/Sidemenu");async function l(e){const i=await t.findById(e),l=await n.findById(e);return i?{type:"Так",title:i.title}:l?{type:"Так",title:l.title}:{type:"Ні",title:"Відсутня"}}async function s(e){const t=await i.findById(e);return null!==t?{type:"Так",title:t.title}:{type:"Ні",title:"Відсутня"}}function a(e,t,n){const i={...e};return!0===n?(i.dependense_main=t.type,i.dependense_main_title=t.title,i):!1===n?(i.dependense_side=t.type,i.dependense_side_title=t.title,i):void 0}module.exports.getCanceledPage=async t=>{const n=[];let i={page_type:"content_page",$or:[{public_status:"cancel"},{public_status:"deffered"}]};if(t.length){i={...{...i},_id:{$in:t}}}const d=await e.find(i).select({_id:1,page_title:2,generated_menu_link:3,generated_sidemenu_link:4,lang:5,keywords:6}),u=JSON.parse(JSON.stringify(d));for(let e=0;e<u.length;e++){const{generated_menu_link:t,generated_sidemenu_link:i}=u[e];if(null!==t){const n=await l(t);u[e]=a(u[e],n,!0)}if(null!==i){const t=await s(i);null!==t&&(u[e]=a(u[e],t,!1)),null===t&&(u[e]=a(u[e],{type:"Ні",title:"Відсутня"},!1))}null===t&&(u[e]=a(u[e],{type:"Ні",title:"Відсутня"},!0)),null===i&&(u[e]=a(u[e],{type:"Ні",title:"Відсутня"},!1)),n.push(u[e])}return n},module.exports.getAllPage=async t=>{const n=[];let i={page_type:"content_page",public_status:"active"};if(t.length){i={...{...i},_id:{$in:t}}}const d=await e.find(i).select({_id:1,page_title:2,generated_menu_link:3,generated_sidemenu_link:4,lang:5,keywords:6}),u=JSON.parse(JSON.stringify(d));for(let e=0;e<u.length;e++){const{generated_menu_link:t,generated_sidemenu_link:i}=u[e];if(null!==t){const n=await l(t);u[e]=a(u[e],n,!0)}if(null!==i){const t=await s(i);null!==t&&(u[e]=a(u[e],t,!1)),null===t&&(u[e]=a(u[e],{type:"Ні",title:"Відсутня"},!1))}null===t&&(u[e]=a(u[e],{type:"Ні",title:"Відсутня"},!0)),null===i&&(u[e]=a(u[e],{type:"Ні",title:"Відсутня"},!1)),n.push(u[e])}return n};