"use strict";const e=require("mongoose"),o=require("node-cron"),c=require("../../settings.json"),{publishChecker:n}=require("./publishChecker"),s=process.env.DB_CONNECTION||c.db_connect;e.connect(s,{useUnifiedTopology:!0,useNewUrlParser:!0,useFindAndModify:!1},e=>{e&&console.log(e)}).then(()=>{console.log("Deffered publication service - Db connected!")}).catch(e=>{console.log(e)}),console.log("Deffered publication service - started!!"),o.schedule("* * * * * *",async()=>{await n()});